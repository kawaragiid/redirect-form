<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<title>KALENDER SOYA</title>

<style>
/* ============= THEME COLORS & FONTS ============= */
:root {
    /* Warna Matte ala Apple */
    --matte-orange: #FB923C; /* Orange pastel */
    --matte-blue:   #60A5FA; /* Blue pastel */
    --matte-green:  #34D399; /* Emerald pastel */
    --bg-dark:      #0F172A; /* Dark Slate */
}

/* ============= BASE STYLE ============= */
body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden; /* Mencegah scroll saat animasi keluar */
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Inter", sans-serif;
    background-color: var(--bg-dark);
    color: white;
}

/* ============= BACKGROUND VIDEO ============= */
.video-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    pointer-events: none; /* Agar tidak bisa diklik */
    
    /* MODIFIED: Transisi opacity agar perpindahan landscape/portrait halus */
    transition: opacity 0.5s ease, visibility 0.5s;
    
    /* Default state: Hidden tapi tetap ada di DOM (Bukan display:none) */
    opacity: 0;
    z-index: -10;
    visibility: hidden; 
}

/* Class untuk video yang AKTIF */
.video-active {
    opacity: 0.3 !important; /* Opacity 30% sesuai request */
    z-index: -5 !important;
    visibility: visible !important;
}

/* ============= BACKGROUND BLUR (APPLE STYLE) ============= */
.background-blobs {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2; /* Di atas video, di bawah konten */
    overflow: hidden;
    pointer-events: none;
}

.blob {
    position: absolute;
    border-radius: 50%;
    filter: blur(80px); /* Efek Matte Blur yang kuat */
    opacity: 0.6;
    animation: blobFloat 10s infinite alternate;
}

.blob-1 {
    top: -10%;
    left: -10%;
    width: 50vw;
    height: 50vw;
    background: var(--matte-orange);
    animation-delay: 0s;
}

.blob-2 {
    bottom: -10%;
    right: -10%;
    width: 50vw;
    height: 50vw;
    background: var(--matte-blue);
    animation-delay: -2s;
}

.blob-3 {
    top: 40%;
    left: 40%;
    width: 40vw;
    height: 40vw;
    background: var(--matte-green);
    transform: translate(-50%, -50%);
    opacity: 0.4;
    animation-delay: -4s;
}

@keyframes blobFloat {
    0% { transform: translate(0, 0) scale(1); }
    100% { transform: translate(20px, -20px) scale(1.1); }
}

/* ============= LIQUID GLASS CARD ============= */
.glass-box {
    position: relative;
    width: 85%;
    max-width: 360px;
    padding: 40px 30px;
    border-radius: 32px;
    
    /* Liquid Glass Effect Initial State */
    background: linear-gradient(
        135deg, 
        rgba(255, 255, 255, 0.10),
        rgba(255, 255, 255, 0.02)
    );
    backdrop-filter: blur(30px) saturate(180%);
    -webkit-backdrop-filter: blur(30px) saturate(180%);
    
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    border-right: 1px solid rgba(255, 255, 255, 0.05);
    
    box-shadow: 
        0 30px 60px rgba(0, 0, 0, 0.4), 
        inset 0 0 0 1px rgba(255, 255, 255, 0.1);
        
    text-align: center;
    
    /* MODIFIED: Transisi ditambahkan untuk background, border, dll */
    transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1), 
                opacity 0.6s ease-in,
                background 1.5s ease,       /* Transisi background halus */
                backdrop-filter 1.5s ease,  /* Transisi blur halus */
                border-color 1.5s ease,
                box-shadow 1.5s ease;
}

/* CLASS BARU: Mode Super Clear (Diaktifkan saat Start) */
.glass-box.transparent-mode {
    /* 1. Background BENAR-BENAR transparant */
    background: transparent !important;

    /* 2. Blur DIHILANGKAN total agar seperti bolong */
    backdrop-filter: blur(0px) !important;
    -webkit-backdrop-filter: blur(0px) !important;

    /* 3. Border DIPERTEGAS & DIPERTEBAL sedikit agar terlihat efek 'distorsi' di pinggir */
    border: 1.5px solid rgba(255, 255, 255, 0.4) !important;
    border-bottom: 1.5px solid rgba(255, 255, 255, 0.2) !important;

    /* 4. Shadow untuk memberi kesan ada kaca di pinggiran (Inner Glow & Outer Glow) */
    box-shadow: 
        inset 0 0 20px rgba(255, 255, 255, 0.1), /* Kilau dalam */
        0 0 20px rgba(255, 255, 255, 0.05) !important; /* Kilau luar halus */
}

/* Class untuk animasi Unlock Screen (Slide Up - Final Exit) */
.glass-box.unlock-screen {
    transform: translateY(-120vh) scale(0.95);
    opacity: 0;
}

/* Window dots (Akan ikut hilang pelan-pelan jika diinginkan, atau tetap melayang) 
   Di sini saya biarkan tetap terlihat sebentar lalu ikut container.
*/
.window-buttons {
    position: absolute;
    top: 20px;
    left: 20px;
    display: flex;
    gap: 8px;
    transition: opacity 1s ease;
}
.glass-box.transparent-mode .window-buttons {
    opacity: 0; /* Dots ikut menghilang agar terlihat bersih */
}

.btn-dot {
    width: 12px; 
    height: 12px;
    border-radius: 50%;
}
.btn-close { background: #FF5F56; }
.btn-min   { background: #FFBD2E; }
.btn-max   { background: #27C93F; }

/* Logo Area */
.logo-container {
    margin-bottom: 10px;
}
.logo-img {
    width: 72px;
    height: 72px;
    object-fit: contain;
    filter: drop-shadow(0 4px 10px rgba(0,0,0,0.2));
}
/* Fallback jika gambar tidak ada */
.logo-placeholder {
    width: 72px;
    height: 72px;
    background: rgba(255,255,255,0.1);
    border-radius: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    font-size: 30px;
}

.logo-title {
    font-size: 26px;
    color: white;
    font-weight: 700;
    letter-spacing: 0.5px;
    margin: 10px 0 20px 0;
}

/* ============= ANIMASI LOADER (PERMINTAAN #2) ============= */
.loader-wrapper {
    position: relative;
    width: 100px;
    height: 100px;
    margin: 0 auto;
    /* Menggunakan Keyframe swipeFloat sesuai request */
    animation: swipeFloat 3s ease-in-out infinite; 
}

/* Request: Lingkaran muter itu buat gini... */
@keyframes swipeFloat {
    0% { transform: translateY(6px); opacity: 0.9; }
    50% { transform: translateY(-6px); opacity: 1; }
    100% { transform: translateY(6px); opacity: 0.9; }
}

/* Lingkaran statis (karena animasinya sudah di swipeFloat) 
   atau bisa dibuat berputar pelan sebagai pelengkap */
.loader-ring {
    position: absolute;
    inset: 0;
    border-radius: 50%;
    border: 4px solid rgba(255,255,255,0.1);
    
    /* MODIFIKASI: Menambahkan warna Orange agar lengkap 3 warna */
    border-top-color: var(--matte-green);
    border-right-color: var(--matte-blue); 
    border-bottom-color: var(--matte-orange); /* Tambahan Warna Orange */
    
    box-shadow: 0 0 15px rgba(251, 146, 60, 0.2); /* Sentuhan glow orange */
    
    /* Sedikit rotasi agar terlihat dinamis, tapi gerakan utama adalah Float */
    animation: slowSpin 8s linear infinite; 
}

@keyframes slowSpin { to { transform: rotate(360deg); } }

.countdown-text {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-size: 42px;
    font-weight: 800;
    color: white;
    font-feature-settings: "tnum";
    font-variant-numeric: tabular-nums;
}

/* Status text */
.text {
    margin-top: 20px;
    font-size: 15px;
    color: rgba(255,255,255,0.8);
    font-weight: 500;
    min-height: 24px;
}

/* Hint Text untuk sound */
.tap-hint {
    font-size: 11px;
    font-weight: 600;
    color: var(--matte-green);
    margin-bottom: 5px;
    animation: pulse 2s infinite;
    text-transform: uppercase;
    letter-spacing: 1px;
}
@keyframes pulse { 0% {opacity:0.4} 50% {opacity:1} 100% {opacity:0.4} }


/* Button */
.motivation-button {
    width: 100%;
    margin-top: 25px;
    padding: 14px;
    font-size: 15px;
    font-weight: 600;
    color: white;
    border: none;
    border-radius: 16px;
    cursor: pointer;
    /* Gradient yang lebih matte/halus */
    background: linear-gradient(135deg, var(--matte-green), #059669);
    box-shadow: 0 4px 15px rgba(16,185,129,0.3);
    transition: transform 0.2s;
}
.motivation-button:active {
    transform: scale(0.97);
}

#quote-display {
    margin-top: 18px;
    font-size: 14px;
    color: rgba(255,255,255,0.7);
    font-style: italic;
    min-height: 40px;
    line-height: 1.4;
    padding: 0 10px;
}

.credit {
    margin-top: 30px;
    font-size: 11px;
    color: rgba(255,255,255,0.4);
    letter-spacing: 1px;
    text-transform: uppercase;
}
</style>
</head>

<body>

    <!-- 
        VIDEO BACKGROUND:
        Autoplay logic dikontrol oleh JS di bawah.
        JS akan memastikan hanya 1 video yang berjalan sesuai ukuran layar.
        Tambahkan 'autoplay' di HTML sebagai fallback untuk Android.
    -->
    
    <!-- Video Landscape (Desktop/Tablet) -->
    <video autoplay muted loop playsinline class="video-background" id="vid-landscape">
        <source src="pet.mp4" type="video/mp4">
    </video>

    <!-- Video Portrait (HP/Mobile) -->
    <video autoplay muted loop playsinline class="video-background" id="vid-portrait">
        <source src="pot.mp4" type="video/mp4">
    </video>

    <!-- Background Blobs -->
    <div class="background-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <div class="glass-box" id="mainCard">

        <!-- macOS dots -->
        <div class="window-buttons">
            <div class="btn-dot btn-close"></div>
            <div class="btn-dot btn-min"></div>
            <div class="btn-dot btn-max"></div>
        </div>

        <!-- LOGO -->
        <div class="logo-container">
            <img src="logo.png" class="logo-img" onerror="this.style.display='none'; document.getElementById('fb-logo').style.display='flex'">
            <div id="fb-logo" class="logo-placeholder" style="display:none">üìÖ</div>
        </div>
        
        <h1 class="logo-title">KALENDER SOYA</h1>

        <div class="loader-wrapper">
            <div class="loader-ring"></div>
            <div class="countdown-text" id="countdown">10</div>
        </div>

        <div id="status" class="text">Ketuk Layar untuk Memulai</div>

        <!-- Hint kecil agar user tahu tap layar akan menyalakan suara -->
        <div class="tap-hint" id="soundHint">KLIK / TAP DI SINI</div>

        <button class="motivation-button" id="quoteBtn">‚ú® Ubah Kutipan</button>
        <div id="quote-display">‚ÄúSiapa monster sebenarnya?‚Äù</div>

        <div class="credit">PREMIUM UI | Design by KEIGO</div>
    </div>

<script>
/* LOGIKA MANAJEMEN VIDEO & EXPERIENCE */

const vidLandscape = document.getElementById("vid-landscape");
const vidPortrait = document.getElementById("vid-portrait");

// Fungsi untuk mengatur mana video yang aktif berdasarkan lebar layar
function manageVideoVisibility() {
    // Deteksi jika layar lebih kecil dari 768px (Mobile)
    const isPortraitMode = window.matchMedia("(max-width: 768px)").matches;

    if (isPortraitMode) {
        // --- MODE HP (PORTRAIT) ---
        // Sembunyikan Landscape (pause untuk hemat resource)
        vidLandscape.classList.remove('video-active');
        vidLandscape.pause();
        
        // Tampilkan Portrait
        vidPortrait.classList.add('video-active');
        
        // Coba play jika belum jalan
        if (vidPortrait.paused) {
            vidPortrait.play().catch(e => console.log("Autoplay Portrait blocked:", e));
        }
    } else {
        // --- MODE DESKTOP (LANDSCAPE) ---
        // Sembunyikan Portrait
        vidPortrait.classList.remove('video-active');
        vidPortrait.pause();

        // Tampilkan Landscape
        vidLandscape.classList.add('video-active');
        
        // Coba play jika belum jalan
        if (vidLandscape.paused) {
            vidLandscape.play().catch(e => console.log("Autoplay Landscape blocked:", e));
        }
    }
}

// Jalankan saat pertama kali load
document.addEventListener("DOMContentLoaded", () => {
    manageVideoVisibility();
});

// FIX JITTER: Gunakan debounce untuk resize agar tidak spamming saat scroll di Android
let resizeTimer;
window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(manageVideoVisibility, 100);
});


// FIX ANDROID BUG: "WATCHDOG" (Penjaga Video)
// Script ini akan berjalan setiap 1.5 detik untuk memastikan video aktif tetap berjalan
// Android sering menidurkan video background untuk hemat baterai
setInterval(() => {
    const isPortraitMode = window.matchMedia("(max-width: 768px)").matches;
    const activeVideo = isPortraitMode ? vidPortrait : vidLandscape;
    
    // Jika video seharusnya aktif tapi mati (paused) & halaman sedang dilihat
    if (activeVideo.paused && document.visibilityState === 'visible') {
        console.log("Watchdog: Waking up video...");
        activeVideo.play().catch(e => { /* Ignore abort error */ });
    }
}, 1500);

// FIX ANDROID: Restart video saat kembali ke Tab
document.addEventListener("visibilitychange", () => {
    if (document.visibilityState === 'visible') {
        manageVideoVisibility();
    }
});

// FIX ANDROID: Paksa play saat sentuhan pertama jika autoplay gagal
function forceWakeVideo() {
    const isPortraitMode = window.matchMedia("(max-width: 768px)").matches;
    const activeVideo = isPortraitMode ? vidPortrait : vidLandscape;
    
    if(activeVideo.paused) {
        activeVideo.play().catch(e => console.log("Force wake error:", e));
    }
}
document.addEventListener('touchstart', forceWakeVideo, {once:true});


// --- LOGIKA INTERAKSI USER ---

let time = 10;
let cycle = 0;
let isStarted = false; 
let timer = null; 

const cd = document.getElementById("countdown");
const statusText = document.getElementById("status");
const mainCard = document.getElementById("mainCard");
const tapHint = document.getElementById("soundHint");
const quoteDisplay = document.getElementById("quote-display");
const quoteBtn = document.getElementById("quoteBtn");

const quotes = [
    "‚ÄúSiapa monster sebenarnya?‚Äù",
    "‚ÄúKalau aku hilang, apakah ada yang akan mencariku?‚Äù",
    "‚ÄúOrang dewasa tidak selalu benar.‚Äù",
    "‚ÄúKadang suara yang paling penting justru tidak terdengar.‚Äù",
    "‚ÄúKita hanya ingin dipercaya.‚Äù",
    "‚ÄúJika dunia tidak mengerti kita, apakah kita tetap salah?‚Äù",
    "‚ÄúMasa depan adalah milik mereka yang percaya pada mimpi.‚Äù"
];

function setRandomQuote() {
    quoteDisplay.style.opacity = 0;
    setTimeout(() => {
        quoteDisplay.innerText = quotes[Math.floor(Math.random()*quotes.length)];
        quoteDisplay.style.opacity = 1;
    }, 200);
}

quoteBtn.addEventListener("click", (e) => {
    e.stopPropagation(); 
    setRandomQuote();
    if(!isStarted) startExperience();
});

function startExperience() {
    if (isStarted) return; 
    isStarted = true;

    // 1. Unmute KEDUA Video 
    vidLandscape.muted = false;
    vidPortrait.muted = false;
    
    // Pastikan video aktif berjalan & bersuara
    manageVideoVisibility(); 

    // 2. Hilangkan Hint, Listener, dan buat BOX TRANSPARAN
    if(tapHint) tapHint.style.opacity = '0';
    
    // --> INI YANG MEMBUAT BOX JADI BENING <--
    mainCard.classList.add('transparent-mode');
    
    document.removeEventListener('click', startExperience);
    document.removeEventListener('touchstart', startExperience);

    // 3. Mulai Countdown
    statusText.innerText = `Mengarahkan dalam ${time} detik‚Ä¶`;
    
    timer = setInterval(() => {
        time--;
        cd.innerText = time;
        statusText.innerText = `Mengarahkan dalam ${time} detik‚Ä¶`;

        cycle++;
        if (cycle === 3) {
            setRandomQuote();
            cycle = 0;
        }

        if (time <= 0) {
            clearInterval(timer);
            cd.innerText = "GO";
            statusText.innerText = "Membuka...";
            
            setTimeout(() => {
                mainCard.classList.add("unlock-screen");
            }, 300);

            setTimeout(() => {
                window.location.href = "https://forms.gle/5bxVr7yazJtkZ15DA";
            }, 1200);
        }
    }, 1000);
}

document.addEventListener('click', startExperience);
document.addEventListener('touchstart', startExperience);

quoteDisplay.style.transition = "opacity 0.2s";

</script>

</body>
</html>